#!/usr/bin/env zx
"use strict"

import "zx/globals"
import Ffmpeg from "../api/ffmpeg.mjs"

const argv = minimist(process.argv.slice(3), {
    alias: { help: ["h"] },
    boolean: ["help"],
})

const args = process.argv.slice(3)

if (argv.help || !args.length) {
    console.error("ffpro is wrapper for ffmpeg")
}

const ffmpegProcess = $`ffmpeg ${args} -f null - 2>&1`
await Ffmpeg.progress(ffmpegProcess)
