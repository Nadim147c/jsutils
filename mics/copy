#!/usr/bin/env zx
"use strict"

import "zx/globals"
import Help from "../api/help.mjs"
import Terminal from "../api/terminal.mjs"

const argv = minimist(process.argv.slice(3), {
    alias: { help: ["h"] },
    boolean: ["help"],
})

if (argv.help) {
    const helper = new Help("Usage: 'command | copy' 'copy text'")
    helper.option("-h, --help", "Prints the help menu")
    echo($({ input: helper.toString(), sync: true })`cm`)
    exit(0)
}

const text = process.argv.slice(3).join().trim() ?? (await stdin())

Terminal.copy(text)
